import collections

all_num_parents = [1, 2, 4, 7, 11, 16, 22, 28, 28]

import random

MAX_DRAFT_LOSSES = 3
MAX_DRAFT_WINS = 7

MAX_LEAGUE_GAMES = 40


def num_wins_in_random_draft() -> int:
    wins = 0
    losses = 0
    while wins < MAX_DRAFT_WINS and losses < MAX_DRAFT_LOSSES:
        wins_round = random.randint(0, 1)
        if wins_round:
            wins += 1
        else:
            losses += 1
    return wins


def num_wins_in_random_league() -> int:
    wins = 0
    games = 0
    while games < MAX_LEAGUE_GAMES:
        wins_round = random.randint(0, 1)
        if wins_round:
            wins += 1
        games += 1
    return wins


def print_iteration(iteration: int):
    if iteration % 1_000 == 0:
        print(iteration)


def simulate_event(iterations: int, win_func):
    win_counter = collections.defaultdict(int)
    for draft_i in range(iterations):
        print_iteration(draft_i)
        wins = win_func()
        win_counter[wins] += 1

    total_wins = sum(win_counter.values())
    for win_count in win_counter.keys():
        fraction = win_counter[win_count] / total_wins
        print(f'{win_count} - {fraction}')


if __name__ == '__main__':
    # events = []
    # for i, num_parents in enumerate(all_num_parents):
    #     event = 1.0 / 2 ** (i + 1)
    #     events += [event] * num_parents

    # simulate_event(10_000_000, num_wins_in_random_draft)
    simulate_event(10_000_000, num_wins_in_random_league)

    print('debug')

    # for i in range(0, 10):
    #     chance = chance_of_exactly_x_events(i, events)
    #     print(chance)
    # coefs = get_coefs(events)

"""<class 'list'>: [0.04106923419955676, 0.14996002339179057, 0.24601179255442812, 0.2467274883524279, 0.1723109226265357, 0.09014409655031985, 0.03702422191069092, 0.01233749346365999, 0.0034176069045605243, 0.0008018912346456411, 0.00016176477448109553, 2.8399141734735592e-05, 4.382929607899777e-06, 5.997421685642215e-07, 7.329499495076211e-08, 8.050755918558416e-09, 7.991885727399106e-10, 7.204864016091346e-11, 5.924386166563728e-12, 4.4604630417190045e-13, 3.0856321711789214e-14, 1.967430053479405e-15, 1.1595328726851108e-16, 6.333207165590496e-18, 3.2133164137111687e-19, 1.517819516528394e-20, 6.687999323826654e-22, 2.7541489753043456e-23, 1.0617920320909694e-24, 3.8383454797949074e-26, 1.3029993353194119e-27, 4.159475490602995e-29, 1.2502175509993812e-30, 3.542475205876579e-32, 9.473054166990436e-34, 2.3932709406042127e-35, 5.71794967554357e-37, 1.2931139483492473e-38, 2.7704989068262796e-40, 5.6280457451707456e-42, 1.0848456923573577e-43, 1.985643137971754e-45, 3.453429563463187e-47, 5.71073098066075e-49, 8.984279364471498e-51, 1.3454517072180083e-52, 1.9189961805156354e-54, 2.6080427884303768e-56, 3.3790119079997415e-58, 4.1752824889464483e-60, 4.922404721136934e-62, 5.5389341901432054e-64, 5.95090493243024e-66, 6.106424367120143e-68, 5.986409930963303e-70, 5.608402266423534e-72, 5.0224137098902955e-74, 4.3001510522752406e-76, 3.520790555071139e-78, 2.757144373841137e-80, 2.0654258668739472e-82, 1.480297163187721e-84, 1.01514088531334e-86, 6.661642637970535e-89, 4.1835405508050097e-91, 2.514402772963504e-93, 1.4463219263815591e-95, 7.962249522959414e-98, 4.1950677500327687e-100, 2.115223941746535e-102, 1.0206095206559846e-104, 4.7120528630139196e-107, 2.0814154312640077e-109, 8.795192733185131e-112, 3.554664044417215e-114, 1.3738373979941012e-116, 5.076454600501181e-119, 1.7929420163207776e-121, 6.0510601051542025e-124, 1.9508378836042528e-126, 6.006005729990074e-129, 1.7650622410534147e-131, 4.949513186710959e-134, 1.3237138871997077e-136, 3.374716624767701e-139, 8.196991099028436e-142, 1.8957740459149658e-144, 4.1720694589543594e-147, 8.730562692476353e-150, 1.7358990318307826e-152, 3.2766829364049534e-155, 5.8664583396056e-158, 9.952164594611753e-161, 1.5980424891264812e-163, 2.4259071682914814e-166, 3.477064569338491e-169, 4.698808880896205e-172, 5.977538802977643e-175, 7.146137112732187e-178, 8.013302984223546e-181..."""

"""
0 - 0.1249783
1 - 0.1875412
2 - 0.1874744
3 - 0.1562196
4 - 0.1171667
5 - 0.0821073
6 - 0.054765
7 - 0.0897475
"""
